name: Verificar Convenci√≥n del Tag

on:
  push:
    tags:
      - 'preview*'

jobs:
  validar-tag:
    runs-on: ubuntu-latest

    steps:
      - name: Extraer rama y versi√≥n del tag
        run: |
          TAG_NAME="${GITHUB_REF#refs/tags/}"

          # Extraer partes usando expresiones regulares
          if [[ "$TAG_NAME" =~ ^preview-(.+)-v([0-9]+\.[0-9]+\.[0-9]+)$ ]]; then
            BRANCH_NAME="${BASH_REMATCH[1]}"
            VERSION="${BASH_REMATCH[2]}"
            echo "‚úÖ Tag v√°lido: $TAG_NAME"
            echo "üìÇ Rama original: $BRANCH_NAME"
            echo "üìå Versi√≥n: $VERSION"
          else
            echo "‚ùå El tag '$TAG_NAME' no sigue la convenci√≥n preview-nombre-rama-vX.Y.Z"
            exit 1
          fi
